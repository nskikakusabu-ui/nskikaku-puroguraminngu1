:root {
    --brand: #27ae60;    /* 信頼の緑 */
    --accent: #f39c12;   /* 注意・強調のオレンジ */
    --error: #e74c3c;    /* エラーの赤 */
    --text: #2c3e50;     /* 読みやすい濃いグレー */
    --bg: #fdfdfd;       /* 清潔な白背景 */
    --code-bg: #2d3436;  /* コード背景 */
}

body {
    font-family: "Hiragino Kaku Gothic ProN", "Meiryo", sans-serif;
    margin: 0; background: var(--bg); color: var(--text);
    height: 100vh; display: flex; flex-direction: column; overflow: hidden;
}

.hidden { display: none !important; }

/* ヘッダー */
header {
    background: #fff; padding: 10px 20px; border-bottom: 4px solid var(--brand);
    display: flex; justify-content: space-between; align-items: center; box-shadow: 0 2px 5px rgba(0,0,0,0.05);
}
.logo { height: 40px; margin-right: 15px; vertical-align: middle; }
.service-name { font-weight: bold; font-size: 1.2rem; color: var(--brand); vertical-align: middle; }
#header-date { font-weight: bold; color: #7f8c8d; }

/* ホーム画面 */
#home-screen { flex: 1; display: flex; flex-direction: column; align-items: center; justify-content: center; background: #f0f2f5; }
.home-hero { text-align: center; margin-bottom: 40px; }
.course-list { display: flex; gap: 30px; }
.course-card {
    background: #fff; width: 320px; padding: 30px; border-radius: 15px; position: relative;
    box-shadow: 0 10px 20px rgba(0,0,0,0.05); text-align: center; border: 2px solid transparent; transition: 0.3s;
}
.course-card.active:hover { border-color: var(--brand); transform: translateY(-5px); cursor: pointer; }
.badge-rec { position: absolute; top: -10px; right: 20px; background: var(--accent); color: white; padding: 5px 12px; border-radius: 20px; font-weight: bold; font-size: 0.8rem; }
.icon-area { font-size: 4rem; margin-bottom: 10px; }
.status-bar { margin: 20px 0; text-align: left; font-size: 0.9rem; }
.bar-bg { background: #eee; height: 10px; border-radius: 5px; margin-top: 5px; overflow: hidden; }
#bar-fill { background: var(--brand); height: 100%; width: 0%; transition: 0.5s; }
.btn-start { background: var(--brand); color: white; border: none; padding: 12px 30px; border-radius: 25px; font-weight: bold; font-size: 1.1rem; cursor: pointer; width: 100%; margin-top: 10px; }
.course-card.locked { opacity: 0.6; background: #eee; pointer-events: none; }

/* 学習画面レイアウト（左6 : 右4） */
#learning-screen { flex: 1; display: flex; overflow: hidden; }

/* 左：スライドエリア */
.slide-area { flex: 1.4; background: #fff; padding: 30px 40px; display: flex; flex-direction: column; border-right: 2px solid #eee; overflow-y: auto; }
.area-header { display: flex; justify-content: space-between; margin-bottom: 20px; border-bottom: 1px solid #eee; padding-bottom: 10px; }
.btn-home { background: #eee; border: none; padding: 5px 15px; border-radius: 5px; cursor: pointer; color: #555; }
.chapter-title { font-weight: bold; color: var(--brand); font-size: 1.1rem; }

.slide-body { flex: 1; font-size: 1.2rem; line-height: 1.8; color: #333; }
.slide-body h2 { font-size: 1.8rem; border-left: 8px solid var(--brand); padding-left: 15px; color: #2c3e50; margin-bottom: 25px; }
.slide-body p { margin-bottom: 20px; }
.highlight { background: linear-gradient(transparent 60%, #ffeaa7 60%); font-weight: bold; }
.code-box {
    background: #f4f4f4; border-left: 5px solid #2c3e50; padding: 15px; margin: 20px 0;
    font-family: monospace; font-size: 1.1rem; color: #d35400; font-weight: bold;
}
.mission-box {
    border: 3px solid var(--accent); background: #fffaf0; padding: 20px; border-radius: 10px; margin-top: 30px;
}
.mission-title { font-weight: bold; color: var(--accent); display: block; margin-bottom: 10px; font-size: 1.3rem; }

.slide-nav { margin-top: 30px; display: flex; justify-content: space-between; }
.nav-btn { padding: 12px 25px; border: 2px solid #ddd; background: #fff; border-radius: 8px; font-weight: bold; cursor: pointer; font-size: 1rem; }
.nav-btn.primary { background: var(--brand); color: #fff; border-color: var(--brand); }
.nav-btn:disabled { opacity: 0.3; cursor: not-allowed; }

/* 右：実践エリア */
.practice-area { flex: 1; background: #2c3e50; padding: 20px; display: flex; flex-direction: column; gap: 15px; color: #fff; }

/* ステータスパネル */
#status-panel { background: #34495e; padding: 15px; border-radius: 8px; text-align: center; font-weight: bold; transition: 0.3s; border: 2px solid transparent; }
.status-neutral { border-color: #7f8c8d; color: #bdc3c7; }
.status-ok { background: #2ecc71; color: #fff; border-color: #27ae60; animation: pop 0.3s; }
.status-ng { background: #e74c3c; color: #fff; border-color: #c0392b; animation: shake 0.3s; }
@keyframes pop { 0% { transform: scale(0.9); } 50% { transform: scale(1.05); } 100% { transform: scale(1); } }
@keyframes shake { 0% { transform: translateX(0); } 25% { transform: translateX(-5px); } 75% { transform: translateX(5px); } 100% { transform: translateX(0); } }

/* プレビュー */
#visual-monitor { height: 180px; background: #dfe6e9; border-radius: 8px; padding: 10px; }
#game-stage { width: 100%; height: 100%; background: #fff; position: relative; border-radius: 4px; overflow: hidden; }
#player { width: 30px; height: 30px; background: var(--error); position: absolute; top: 10px; left: 10px; border-radius: 50%; transition: 0.5s; z-index: 2; }
#goal { position: absolute; bottom: 10px; right: 10px; border: 2px dashed var(--brand); color: var(--brand); font-weight: bold; padding: 5px; }
#obstacle { position: absolute; top: 60px; left: 120px; width: 40px; height: 80px; background: #95a5a6; color: white; display: flex; align-items: center; justify-content: center; font-size: 0.7rem; }

/* エディタ */
.editor-wrapper { flex: 1; display: flex; flex-direction: column; }
.label-tag { font-size: 0.8rem; color: #95a5a6; margin-bottom: 5px; }
#code-editor {
    flex: 1; background: #1e1e1e; color: #00ff00; padding: 15px; border-radius: 8px;
    font-family: 'Consolas', monospace; font-size: 1.2rem; border: none; resize: none; outline: none;
}
.btn-execute { background: var(--accent); color: #fff; border: none; padding: 15px; border-radius: 8px; font-weight: bold; font-size: 1.2rem; cursor: pointer; box-shadow: 0 4px 0 #d35400; transition: 0.1s; }
.btn-execute:active { transform: translateY(2px); box-shadow: 0 2px 0 #d35400; }

/* フィードバック */
.feedback-area { height: 140px; display: flex; gap: 10px; }
.console-log { flex: 1; background: #000; color: #bdc3c7; padding: 10px; font-family: monospace; border-radius: 5px; overflow-y: auto; font-size: 0.9rem; }
.advice-box { flex: 1; background: #fff; color: #333; padding: 10px; border-radius: 5px; font-size: 0.9rem; overflow-y: auto; border-left: 4px solid var(--accent); }

footer { background: #fff; padding: 10px; text-align: center; border-top: 1px solid #eee; font-size: 0.8rem; }
.btn-official { color: var(--brand); text-decoration: none; border: 1px solid var(--brand); padding: 5px 15px; border-radius: 20px; margin-left: 10px; font-weight: bold; }